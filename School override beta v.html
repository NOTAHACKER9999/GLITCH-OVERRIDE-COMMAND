<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Welcome to School Override</title>
  <style>
    body { margin:0; font-family: Arial, sans-serif; background:#000; color:#fff; }
    .topbar { display:flex; justify-content:center; background:#000; border-bottom:1px solid #fff; height:60px; position:relative; }
    .nav { display:flex; gap:30px; align-items:center; position:relative; }
    .nav a { color:#fff; text-decoration:none; font-weight:bold; padding:8px 14px; border-radius:6px; transition: background .2s; cursor:pointer; position:relative; }
    .nav a:hover { background: rgba(255,255,255,0.1); }
    .dropdown { display:none; position:absolute; top:100%; left:0; background:#111; border:1px solid #fff; border-radius:6px; flex-direction:column; min-width:180px; z-index:500; }
    .dropdown a { padding:10px 14px; border:none; border-radius:0; }
    .dropdown a:hover { background: rgba(255,255,255,0.2); }
    .content { padding:20px; text-align:center; }
    .overlay { position:fixed; top:0; left:0; width:100vw; height:100vh; background:#000; display:none; z-index:999; overflow:auto; }
    .overlay-content { width:100%; min-height:100%; color:#fff; }
    .close-btn { position:absolute; top:15px; right:20px; font-size:28px; font-weight:bold; color:red; cursor:pointer; z-index:1000; }
  </style>
</head>
<body>
  <div class="topbar">
    <nav class="nav">
      <div id="gamesBtn">Games
        <div class="dropdown" id="gamesDropdown">
          <a href="#" data-url="https://raw.githubusercontent.com/NOTAHACKER9999/SCHOOL-OVERRIDE/refs/heads/main/UNBLOCKED%20GAMES/Games/Baldi%20Plus.html">Baldi Plus</a>
          <a href="#" data-url="https://raw.githubusercontent.com/NOTAHACKER9999/SCHOOL-OVERRIDE/refs/heads/main/UNBLOCKED%20GAMES/Games/Baldi%20Remastered.html">Baldi Remastered</a>
          <a href="#" data-url="https://raw.githubusercontent.com/NOTAHACKER9999/SCHOOL-OVERRIDE/refs/heads/main/UNBLOCKED%20GAMES/Games/Bendy.html">Bendy</a>
          <a href="#" data-url="https://raw.githubusercontent.com/NOTAHACKER9999/SCHOOL-OVERRIDE/refs/heads/main/UNBLOCKED%20GAMES/Games/Buckshot%20Ruelette.html">Buckshot Reulette</a>
        </div>
      </div>
      <a href="#">Broswer</a>
      <a id="aiBtn">Ai</a>
      <a href="#">Chat</a>
    </nav>
  </div>

  <div class="content">
    <h1>Welcome to School Override</h1>
    <p>This is the homepage. Use the buttons above to navigate.</p>
  </div>

  <!-- Overlay -->
  <div class="overlay" id="overlay">
    <span class="close-btn" id="closeOverlay">&times;</span>
    <div class="overlay-content" id="overlayContent"></div>
  </div>

  <script>
    const overlay = document.getElementById('overlay');
    const overlayContent = document.getElementById('overlayContent');
    const closeBtn = document.getElementById('closeOverlay');

    const gamesBtn = document.getElementById('gamesBtn');
    const gamesDropdown = document.getElementById('gamesDropdown');
    const aiBtn = document.getElementById('aiBtn');

    // Toggle dropdown
    gamesBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      gamesDropdown.style.display = gamesDropdown.style.display === 'flex' ? 'none' : 'flex';
    });

    document.addEventListener('click', () => { gamesDropdown.style.display = 'none'; });

    // Fetch and run any HTML in overlay
    async function loadOverlay(url) {
      overlay.style.display = "block";
      overlayContent.innerHTML = "<p style='text-align:center;margin-top:50vh;color:white'>Loading...</p>";

      try {
        const res = await fetch(url);
        const html = await res.text();
        overlayContent.innerHTML = html;

        // Execute scripts in the fetched HTML
        overlayContent.querySelectorAll("script").forEach(oldScript => {
          const newScript = document.createElement("script");
          if(oldScript.src){
            newScript.src = oldScript.src;
          } else {
            newScript.textContent = oldScript.textContent;
          }
          document.body.appendChild(newScript);
        });

      } catch(err) {
        overlayContent.innerHTML = `<p style="color:red;text-align:center;margin-top:50vh">Failed to load content: ${err.message}</p>`;
      }
    }

    // Game links
    gamesDropdown.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const url = link.dataset.url;
        loadOverlay(url);
        gamesDropdown.style.display = 'none';
      });
    });

    // AI button
    aiBtn.addEventListener('click', () => {
      const aiUrl = "https://raw.githubusercontent.com/NOTAHACKER9999/SCHOOL-OVERRIDE/refs/heads/main/UNBLOCKED%20GAMES/Games/Ai%20Chat.html";
      loadOverlay(aiUrl);
    });

    // Close overlay
    closeBtn.addEventListener('click', () => {
      overlay.style.display = "none";
      overlayContent.innerHTML = ""; // clean up old scripts/content
    });
  </script>
</body>
</html>
